<!DOCTYPE HTML>
<html>
	<head>
		<title>Tai Chi Helper</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

		<link rel="stylesheet" href="vendor/font-awesome/font-awesome.min.css" />
		<link rel="stylesheet" href="vendor/jquery-mobile/1.4.5/jquery.mobile.min.css" />
		<link rel="stylesheet" href="vendor/waves/waves.min.css" />
		<link rel="stylesheet" href="vendor/wow/animate.css" />
		<link rel="stylesheet" href="css/nativedroid2.css" />
		<link rel="stylesheet" href="css/tai-chi-helper.css" />

		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	</head>
	<body>
		<script>
			if (false)
			{
				(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
					(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
					m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
				
				ga('create', 'UA-82069629-1', 'auto');
				ga('send', 'pageview');
			}
		</script>
		<style>
		.centered { margin: auto; display: block;}
		div.timer
		{
			margin: auto;
			width: 8em;
			text-align: center;
			font-size: xx-large;
		}
		</style>
		

		<div data-role="page" id="home">
			<div data-role="header" data-position="fixed">
				<a href="#left-manu-panel" class="ui-btn ui-btn-left" ><i class="zmdi zmdi-menu"></i></a>
				<h1>Tai Chi Helper</h1>
			</div>
			<div role="main" class="ui-content">
				<div id="logo"></div>
			</div>
		</div>
		<div data-role="page" id="standing-stake">
			<div data-role="header" data-position="fixed">
				<a href="#left-manu-panel" class="ui-btn ui-btn-left" ><i class="zmdi zmdi-menu"></i></a>
				<h1>Multi-Timer</h1>
			</div>
			<div role="main" class="ui-content">
				<div id="ss-spinner"></div>
			</div>
		</div>

		<div data-role="page" id="config2">
			<div data-role="header" data-position="fixed">
				<a href="#left-manu-panel" class="ui-btn ui-btn-left" ><i class="zmdi zmdi-menu"></i></a>
				<h1>Tai Chi Helper : Test Config</h1>
			</div>
			<div role="main" class="ui-content">
			</div>
		</div>

		<div data-role="page" id="about">
			<div data-role="header" data-position="fixed">
				<a href="#left-manu-panel" class="ui-btn ui-btn-left" ><i class="zmdi zmdi-menu"></i></a>
				<h1>Tai Chi Helper : About</h1>
			</div>
			<div role="main" class="ui-content">
				<p>
					<b>Author: </b> Chris Davies<br />
					<b>Git Repository: </b><a href="https://github.com/slowglass/TaiChiHelper">https://github.com/slowglass/TaiChiHelper</a><br />
					<b>Issues list: </b><a href="https://github.com/slowglass/TaiChiHelper/issues">https://github.com/slowglass/TaiChiHelper/issues</a><br />
				</p>
			</div>
		</div>

		<div data-role="panel" id="left-manu-panel" data-position="left" data-display="reveal" data-theme="a">
			<div class='nd2-sidepanel-profile' style="height: 56px">
				<img class='profile-background' src="http://meiquantaichi.com/img/international_branch/branch_photos//sydney-goldencockerel.jpg" style="width:304px;"/>
				<div class="row">
					<div class='col-xs-4 center-xs'>
						<div class='box'>
						</div>
					</div>
					<div class='col-xs-8'>
						<div class='box profile-text'>
							<strong>Tai Chi Helper</strong>
							<span class='subline'>Apps to help you help yourself</span>
						</div>
					</div>
				</div>
			</div>
			<ul data-role="listview" data-inset="false">
			</ul>
		</div>

		<script src="vendor/jquery/2.1.4/jquery.min.js"></script>
		<script src="vendor/jquery-ui/1.11.4/jquery-ui.min.js"></script>
		<script src="vendor/jquery-mobile/1.4.5/jquery.mobile.min.js"></script>
		<script src="vendor/d3/d3.v3.min.js"></script>
		<script src="nd2settings.js"></script>
		<script src="vendor/waves/waves.min.js"></script>
		<script src="vendor/wow/wow.min.js"></script>
		<script src="js/nativedroid2.js"></script>
		<script src="js/howler2.js"></script>
		<script src="js/yin-yang.js"></script>
		<script src="js/multi-timer.js"></script>
		<script src="js/swimming-dragon.js"></script>
		<script src="js/spill.js"></script>
		<script src="js/debug.js"></script>
		<script src="js/config.js"></script>
		<script src="js/config2.js"></script>
		<script src="js/wake-lock.js"></script>
		<style>
		.scb img { width: 52px; height: 52px;}
		</style>
		<script>
			var debug=new Debug("#debug_opts");
			var timer=new MultiTimer("#ss-spinner")
			var logo=new YinYang("#logo", "#ccf", "#004");
			var sd=new SwimmingDragon("#sd-spinner");
			var config=new Config(timer, sd);
			var config2=new Config2();

			$('#logo path:eq(0)').unbind("click").on("click", function() { $("body").pagecontainer( "change", "#swimming-dragon"); });
			$('#logo path:eq(1)').unbind("click").on("click", function() { $("body").pagecontainer( "change", "#standing-stake"); });
			$("body").on("pagechange", function() {
				$('#left-manu-panel').enhanceWithin().panel(); 
				$('#left-manu-panel ul').listview();
				$('#left-manu-panel ul').listview("refresh");
			});
			$("body").on("click", "#left-manu-panel ul .sslink", function(e) {
				var mt=$(this).data("mt");
				var c=config2.readConfig(mt); //{ cn: "MultiTimer:"+0, st: 10, et:120, ic: 3 };
				timer.setName(c.cn);
				timer.setIterations(c.ic);
				timer.setDuration(c.et);
				timer.setSetupTime(c.st);
			});

			$("body").on("pagecontainerbeforechange", function(e, ui) {
				//if (!ui.toPage instanceof jQuery) return;
				if (ui.prevPage instanceof jQuery)
				{
					debug.log("Index", "Stopping " + ui.prevPage.attr("id"));
					switch (ui.prevPage.attr("id"))
					{
						case "home":
							break;
						case "standing-stake":
							timer.stop();
							break;
						case "swimming-dragon":
							sd.reset();
							break;
						case "config":
							break;
					}
				}
				
				if (ui.toPage instanceof jQuery)
				{
					debug.log("Index", "Starting " + ui.toPage.attr("id"));
					$('#left-manu-panel').enhanceWithin().panel();
					switch (ui.toPage.attr("id"))
					{
						case "home":
							break;
						case "standing-stake":
							timer.stop();
							break;
						case "swimming-dragon":
							sd.reset();
							break;
						case "config":
							config.bind();
							break;
						case "config2":
							config2.bind();
							break;
					}
				}
			});
		</script>
		<script id="panel-init">
			$( document ).ready(function() { 
				$('#left-manu-panel').enhanceWithin().panel(); 
				$('#left-manu-panel ul').listview();
				$('#left-manu-panel ul').listview("refresh");
				config2.bind();
			});
		</script>
	</body>
</html>
